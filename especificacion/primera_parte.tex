\documentclass[10pt,a4paper]{article}

\input{AEDmacros}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex


\titulo{Especificaci\'on y correcci\'on de problemas}
\fecha{\today}

\materia{Algoritmos y Estructuras de Datos}
\grupo{numero azar}

\integrante{Delicia, Felipe Nahuel}{002/01}{delicia4581@gmail.com}
\integrante{Bagini, Jeremias Agustin}{618/20}{jerebagini@gmail.com}
\integrante{Bol\'ivar, Carlos}{990/23}{carlosbolivarp24@gmail.com}
\integrante{De La Pina, Lucas Le\'on}{924/22}{lldelapina@gmail.com}
% Pongan cuantos integrantes quieran

% Declaramos donde van a estar las figuras
% No es obligatorio, pero suele ser comodo
\graphicspath{{../static/}}

\begin{document}

\maketitle

\section{Especificaci\'on}
\subsection{redistribucionDeLosFrutos}

\begin{proc}{redistribucionDeLosFrutos}{\In recursos : \TLista{\float}, \In cooperan : \TLista{\bool}}{\TLista{\float}}

\requiere{\longitud{recursos} = \longitud{cooperan}}
% \requiere{(\longitud{recursos} > 0) \wedge (\longitud{cooperan} > 0)}
% Revisar si conviene la version de Jere

\asegura{recursosPosDistribucion(res, recursos, cooperan) \wedge (\longitud{res} = \longitud{recursos})}
\hfill \break

\pred{recursosPosDistribucion}{\In result : \TLista{\float} ,\In recursos : \TLista{\float}, \In cooperan : \TLista{\bool}}
{\paraTodo[unalinea]{i}{\ent}{(0\leq i < \longitud{result}) \yLuego (cooperan[i] = \True) \implicaLuego  result[i] = \frac{fondoComun(recursos, cooperan)}{\longitud{recursos}} } 
\newline \wedge \newline 
\paraTodo[unalinea]{j}{\ent}{(0\leq j < \longitud{result}) \yLuego (cooperan[j] = \False) \implicaLuego  result[j] = recursos[j] + \frac{fondoComun(recursos, cooperan)}{\longitud{recursos}} } 
} 
\hfill \break
\aux{fondoComun}{\In recursos : \TLista{\float}, \In cooperan : \TLista{\bool}}{\float}\hfill {
$\sum_{k=0}^{\longitud{recursos}-1}$
(\IfThenElse{cooperan[k] = \True}{recursos[k]}{0})
}

\end{proc}

\subsection{Trayectoria de los frutos individuales a largo plazo}

\begin{proc}{trayectoriaDeLosFrutosIndividualesALargoPlazo}{\Inout trayectorias : \TLista{\TLista{\float}}, \In cooperan : \TLista{\bool}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}}{}

\requiere{(\longitud{trayectorias} = \longitud{cooperan}) \wedge (\longitud{apuestas} = \longitud{pagos})}

%Hay un desacuerdo con la interpretacion: por un lado, es posible pensar que trayectorias[0] = lista(recursosDeJugadorEnPosicion0). Es posible que sea trayectorias[0] = lista()
% \asegura{\longitud{trayectorias} \geq 
% \longitud{old(trayectorias)}}

\asegura{
\paraTodo[unalinea]{i}{\ent}{
0 \leq i < \longitud{eventos} \implicaLuego 
\paraTodo[]{j}{\ent}{0 \leq j < \longitud{eventos[i]} \implicaLuego trayectorias[i][j+1] = \IfThenElse{(coopera[i] = \False)}{\\ pagoParaJugadoriDelEventoj(trayectoria, apuestas, pagos, eventos, i, j) \\ + 
frutosFondoComun(trayectoria, apuestas, pagos, eventos, cooperan, i, j)\\}{frutosFondoComun(trayectoria, apuestas, pagos, eventos, cooperan, i, j)} }
}
}
\hfill \break
\aux{pagoParaJugadoriDelEventoj}{\In trayectorias : \TLista{\TLista{\float}}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}, \In i : \ent, \In j : \ent}{\float}{
trayectoria[i][j]*apuestas[i][\textbf{eventos[i][j]}]*pagos[i][\textbf{eventos[i][j]}]
}
\hfill \break
\aux{frutosFondoComun}{\In trayectorias : \TLista{\TLista{\float}}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}, \In cooperan : \TLista{\bool}, \In i : \ent, \In j : \ent}{\float}{\frac{fondoComunDelEventoj(trayectoria, apuestas, pagos, eventos ,cooperan, j)}{\longitud{cooperan}}}
\hfill \break
\aux{fondoComunDelEventoj}{\In trayectorias : \TLista{\TLista{\float}}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}, \In cooperan : \TLista{\bool}, \In j : \ent}{\float}{
\\ \sum_{i=0}^{|cooperan|-1} (\IfThenElse{cooperan[i] = \True}{pagoParaJugadoriDelEventoj(trayectoria, apuestas, pagos, eventos, i, j)}{0})
}
\end{proc}

\subsection{Trayectoria Extraña Escalera}

\begin{proc}{trayectoriaExtrañaEscalera}{\In trayectoria : \TLista{\float}}

\requiere{\longitud{trayectoria} > 0}

\asegura{res = \True \iff unicoMaximoLocal(trayectoria)}
\hfill \break
\pred{unicoMaximoLocal}{\In trayectoria : \TLista{\float}}
{(\longitud{trayectoria} = 1 )\newline \lor \newline (\longitud{trayectoria} = 2  \land (trayectoria[0] \neq trayectoria[1])) \newline \lor \newline (\longitud{trayectoria} > 2 \land cantidadMaximosLocales(trayectoria) = 1)}
\hfill \break
\aux{cantidadMaximosLocales}{\In trayectoria : \TLista{\float}}{\float}{(\IfThenElse{trayectoria[0] > trayectoria[1]}{1}{0})\newline+\newline(\IfThenElse{trayectoria[\longitud{trayectoria} - 1] > trayectoria[\longitud{trayectoria} - 2]}{1}{0})\newline+\newline(\IfThenElse{\sum\limits_{i=1}^{\longitud{trayectoria} - 2} trayectoria[i - 1] < trayectoria[i] \land trayectoria[i + 1] < trayectoria[i])}{1}{0}}

\end{proc}

\subsection{Individuo decide si cooperar o no}
\begin{proc}{individuoDecideSiCooperarONo}{\In individuo : \nat, \In recursos : \TLista{\float}, \Inout cooperan : \TLista{\bool}, \In apuestas : \TLista{\TLista{float}},  \In pagos : \TLista{\TLista{float}},  \In eventos : \TLista{\TLista{\nat}}}{}

\requiere{\longitud{individuo} = \longitud{recursos} = \longitud{cooperan}}
\requiere{\longitud{apuestas} = \longitud{pagos} = \longitud{eventos}}

\asegura{cooperan[individuo] = true \Leftrightarrow \\(recursosFinalesSiCoopera(individuo, recursos, cooperan, apuestas, pagos, eventos) \geq \\recursosFinalesSiDeserta(individuo, recursos, apuestas, pagos, eventos))}
\hfill \break
\aux{recursosFinalesSiCoopera}{\In i : \nat, \In recursos : \TLista{\float},  \In apuestas : \TLista{\TLista{float}},  \In pagos : \TLista{\TLista{float}},  \In eventos : \TLista{\TLista{\nat}}}{\float}
{frutosFondoComun(recursos,coopera,apuestas,pagos,eventos)}

\hfill \break
\aux{recursosFinalesSiDeserta}{\In i : \nat, \In recursos : \TLista{\float},  \In apuestas : \TLista{\TLista{float}},  \In pagos : \TLista{\TLista{float}},  \In eventos : \TLista{\TLista{\nat}}}{\float}
{recursosParaJugadoriTrasEventoInicial(recursos,apuestas,pagos,eventos,i) + frutosFondoComun(recursos,coopera,apuestas,pagos,eventos)}
\hfill \break
\aux{recursosParaJugadoriTrasEventoInicial}{\In recursos : \TLista{\float}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}, \In i : \ent}{\float}{
recursos[i]*apuestas[i][\textbf{eventos[i][0]}]*pagos[i][\textbf{eventos[i][0]}]
}
\hfill \break
\aux{frutosFondoComun}{\In recursos : {\TLista{\float}}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}, \In cooperan : \TLista{\bool}}{\float}{\frac{fondoComun(recursos, apuestas, pagos, eventos ,cooperan)}{\longitud{cooperan}}}
\hfill \break
\aux{fondoComun}{\In recursos : {\TLista{\float}}, \In apuestas : \TLista{\TLista{\float}}, \In pagos : \TLista{\TLista{\float}}, \In eventos : \TLista{\TLista{\nat}}, \In cooperan : \TLista{\bool}}{\float}{
\\ \sum_{i=0}^{|cooperan|-1} \\(\IfThenElse{cooperan[i] = \True}{recursosParaJugadoriTrasEventoInicial(recursos, apuestas, pagos, eventos, i)}{0})
}
\end{proc}

\end{document}